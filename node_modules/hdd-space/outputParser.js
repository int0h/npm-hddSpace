"use strict";
function genFinder(headerLine, name, align, re) {
    var offset = headerLine.indexOf(name);
    switch (align) {
        case "left":
            break;
        case "right":
            offset += name.length;
            break;
        default:
            throw new Error(align + ' align not supported');
    }
    ;
    var newReSource = align === "left"
        ? '^' + re.source
        : re.source + '$';
    var newRe = new RegExp(newReSource, 'gim');
    return function (line) {
        var edgeStr = align === "left"
            ? line.slice(offset)
            : line.slice(0, offset);
        newRe.lastIndex = 0;
        var found = newRe.exec(edgeStr);
        if (!found) {
            return undefined;
        }
        ;
        return found[0];
    };
}
;
;
function parseOutput(rules, output) {
    var lines = output.trim().split('\n');
    var headerLine = lines.shift();
    var lookFor = {};
    for (var i in rules) {
        if (!rules.hasOwnProperty(i)) {
            continue;
        }
        ;
        var rule = rules[i];
        lookFor[i] = genFinder(headerLine, rule.name, rule.align, rule.re);
    }
    ;
    return lines.map(function (line) {
        var res = {};
        for (var i in lookFor) {
            res[i] = lookFor[i](line);
        }
        ;
        return res;
    });
}
exports.parseOutput = parseOutput;
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3V0cHV0UGFyc2VyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsib3V0cHV0UGFyc2VyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxtQkFBbUIsVUFBa0IsRUFBRSxJQUFZLEVBQUUsS0FBYSxFQUFFLEVBQVU7SUFDMUUsSUFBSSxNQUFNLEdBQUcsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN0QyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQSxDQUFDO1FBQ1gsS0FBSyxNQUFNO1lBQ1AsS0FBSyxDQUFDO1FBQ1YsS0FBSyxPQUFPO1lBQ1IsTUFBTSxJQUFJLElBQUksQ0FBQyxNQUFNLENBQUM7WUFDdEIsS0FBSyxDQUFDO1FBQ1Y7WUFDSSxNQUFNLElBQUksS0FBSyxDQUFDLEtBQUssR0FBRyxzQkFBc0IsQ0FBQyxDQUFDO0lBQ3hELENBQUM7SUFBQSxDQUFDO0lBQ0YsSUFBTSxXQUFXLEdBQUcsS0FBSyxLQUFLLE1BQU07VUFDOUIsR0FBRyxHQUFHLEVBQUUsQ0FBQyxNQUFNO1VBQ2YsRUFBRSxDQUFDLE1BQU0sR0FBRyxHQUFHLENBQUM7SUFDdEIsSUFBSSxLQUFLLEdBQUcsSUFBSSxNQUFNLENBQUMsV0FBVyxFQUFFLEtBQUssQ0FBQyxDQUFDO0lBQzNDLE1BQU0sQ0FBQyxVQUFTLElBQVk7UUFDeEIsSUFBTSxPQUFPLEdBQUcsS0FBSyxLQUFLLE1BQU07Y0FDMUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUM7Y0FDbEIsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDNUIsS0FBSyxDQUFDLFNBQVMsR0FBRyxDQUFDLENBQUM7UUFDcEIsSUFBTSxLQUFLLEdBQUcsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNsQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFBLENBQUM7WUFDUixNQUFNLENBQUMsU0FBUyxDQUFDO1FBQ3JCLENBQUM7UUFBQSxDQUFDO1FBQ0YsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwQixDQUFDLENBQUM7QUFDTixDQUFDO0FBQUEsQ0FBQztBQVFELENBQUM7QUFFRixxQkFBNEIsS0FBZSxFQUFFLE1BQWM7SUFDdkQsSUFBSSxLQUFLLEdBQUcsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN0QyxJQUFNLFVBQVUsR0FBRyxLQUFLLENBQUMsS0FBSyxFQUFZLENBQUM7SUFDM0MsSUFBTSxPQUFPLEdBQVEsRUFBRSxDQUFDO0lBQ3hCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssQ0FBQyxDQUFBLENBQUM7UUFDakIsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUEsQ0FBQztZQUMxQixRQUFRLENBQUM7UUFDYixDQUFDO1FBQUEsQ0FBQztRQUNGLElBQUksSUFBSSxHQUFHLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNwQixPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsU0FBUyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZFLENBQUM7SUFBQSxDQUFDO0lBQ0YsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBUyxJQUFJO1FBQzFCLElBQUksR0FBRyxHQUFRLEVBQUUsQ0FBQztRQUNsQixHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxPQUFPLENBQUMsQ0FBQSxDQUFDO1lBQ25CLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDOUIsQ0FBQztRQUFBLENBQUM7UUFDRixNQUFNLENBQUMsR0FBRyxDQUFDO0lBQ2YsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDO0FBbEJlLG1CQUFXLGNBa0IxQixDQUFBO0FBQUEsQ0FBQyJ9